name: Deploy Production

on:
  workflow_dispatch:
    inputs:
      confirm:
        description: 'Confirm deployment to VPS'
        required: true
        default: 'yes'

jobs:
  deploy-vps:
    name: Deploy to VPS
    runs-on: ubuntu-latest
    if: github.event.inputs.confirm == 'yes'

    steps:
      - name: Deploy notification
        run: |
          echo "========================================"
          echo "  VPS Deployment Instructions"
          echo "========================================"
          echo ""
          echo "Run locally: ./scripts/deploy.sh"
          echo ""
          echo "Or SSH to VPS and run:"
          echo "  cd /root/vidchat && git pull"
          echo "  source ~/.nvm/nvm.sh && pnpm install && pnpm build"
          echo "  rm -rf /var/www/vidchat/* && cp -r dist/* /var/www/vidchat/"
          echo "  chown -R www-data:www-data /var/www/vidchat"
          echo "  systemctl restart nginx"
          echo ""
          echo "========================================"
